<!DOCTYPE html>
<html>
<head>
	<base href="/">
	<meta charset="utf-8">
	<title>Admin | Add new user</title>
	<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="admin/css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
	<div class="left-menu">
		<div class="left-menu-title">newsMK Admin</div>

		<a href="admin/dashboard"><div class="menu-item"><img src="admin/home-icon"><div class="menu-item-text">Home</div></div></a>

		<div class="label">Live activity</div>
		<a href="admin/users"><div class="menu-item"><img src="admin/user-icon" style="filter: invert(100%);"><div class="menu-item-text">Users</div></div></a>
		<a href="admin/new-post"><div class="menu-item"><img src="admin/add-new-icon" style="filter: invert(100%);"><div class="menu-item-text">Add new user</div></div></a>

		<div class="label">Posts</div>
		<a href="admin/posts"><div class="menu-item"><img src="admin/calendar-icon" style="filter: invert(100%);"><div class="menu-item-text">Manage posts</div></div></a>
		<a href="admin/new-post"><div class="menu-item"><img src="admin/add-new-icon" style="filter: invert(100%);"><div class="menu-item-text">Add new post</div></div></a>

		<div class="label">Post categories</div>
		<a href="admin/categories"><div class="menu-item"><img src="admin/cubes-icon" style="filter: invert(100%);"><div class="menu-item-text">Categories</div></div></a>
		<a href="admin/new-category"><div class="menu-item"><img src="admin/add-new-icon" style="filter: invert(100%);"><div class="menu-item-text">Add new category</div></div></a>
		<br>
		<a id="logout-btn"><div class="menu-item"><img src="admin/login-icon"><div class="menu-item-text">Logout</div></div></a>
	</div> <!--left menu-->

	<script type="text/javascript">
		$(document).ready(function(){
			$('#logout-btn').click(function(event){
				// console.log('leo');
				$.ajax({
					url: 'admins/logout',
					success: function(data){
						if(data.message == 'logged out'){
							location.href = 'admin';
						}
					}
				})
			})
		})
	</script>

	<div class="right">
		<div class="right-wrapper">
			<div class="dashboard-title">Add new user</div><br>

			<div class="row">
				<input id="firstname" class="new-post-input" name="Firstname" type="text" placeholder="Firstname">
			</div>
			<br>
			<div class="row">
				<input id="lastname" class="new-post-input" name="Lastname" type="text" placeholder="Lastname">
			</div>
			<br>
			<div class="row">
				<input id="email" class="new-post-input" name="Email" type="text" placeholder="Email">
			</div>
			<br>
			<div class="row">
				<input id="username" class="new-post-input" name="Username" type="text" placeholder="Username">
			</div>
			<br>
			<div class="row">
				<input id="password" class="new-post-input" name="Password" type="password" placeholder="Password">
			</div>
			<br>
			<br>
			<button class="save-btn"><img src="admin/add-new-icon"><span>Add user</span></button>
		</div> <!-- right wrapper-->
	</div> <!--right-->

	<script type="text/javascript">
		$(document).ready(function(){
			$('.save-btn').click(function(event){
				event.preventDefault();

				const firstname = $('#firstname').val();
				const lastname = $('#lastname').val();
				const email = $('#email').val();
				const username = $('#username').val();
				const password = $('#password').val();

				$.ajax({
					url: 'admins/new-user',
					method: 'post',
					data: {
						firstname: firstname,
						lastname: lastname,
						email: email,
						username: username,
						password: password
					},
					success: function(data){
						console.log(data);
						if(data.message == 'user added'){
							location.href = "admin/users";
						}
					}, error: function(error){
						console.log(error);
					}
				})
			})
		})
	</script>
</body>
</html>